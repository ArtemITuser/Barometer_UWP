<Page
    x:Class="Barometer_UWP.Views.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Barometer_UWP.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Padding="20" Background="{ThemeResource SystemControlBackgroundAltHighBrush}">
            <TextBlock Text="Barometer" 
                       Style="{ThemeResource HeaderTextBlockStyle}" 
                       HorizontalAlignment="Center" 
                       Margin="0,0,0,10"/>
        </StackPanel>

        <!-- Main Content -->
        <ScrollViewer Grid.Row="1" Padding="20">
            <StackPanel>
                <!-- Current Pressure Display -->
                <Grid Margin="0,0,0,30">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <TextBlock Grid.Row="0" 
                               Text="Current Pressure" 
                               Style="{ThemeResource SubtitleTextBlockStyle}" 
                               HorizontalAlignment="Center"/>
                    
                    <TextBlock Grid.Row="1" 
                               x:Name="CurrentPressureTextBlock"
                               Text="{x:Bind ViewModel.CurrentPressureFormatted, Mode=OneWay}" 
                               Style="{ThemeResource LargeNumberTextBlockStyle}" 
                               HorizontalAlignment="Center" 
                               FontSize="64" 
                               Margin="0,10"/>
                    
                    <TextBlock Grid.Row="2" 
                               Text="{x:Bind ViewModel.UnitMode, Mode=OneWay}" 
                               Style="{ThemeResource BodyTextBlockStyle}" 
                               HorizontalAlignment="Center"/>
                </Grid>

                <!-- Unit Switch Button -->
                <Button Content="Switch Unit" 
                        Command="{x:Bind ViewModel.SwitchUnitCommand}" 
                        HorizontalAlignment="Center" 
                        Margin="0,0,0,30"/>

                <!-- Recent Records -->
                <TextBlock Text="Recent Readings" 
                           Style="{ThemeResource SubtitleTextBlockStyle}" 
                           Margin="0,0,0,10"/>

                <ListView ItemsSource="{x:Bind ViewModel.RecentRecords, Mode=OneWay}" 
                          Height="200" 
                          ScrollViewer.VerticalScrollMode="Enabled"
                          ScrollViewer.VerticalScrollBarVisibility="Auto">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Grid Padding="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                
                                <TextBlock Grid.Column="0" 
                                           Text="{Binding Timestamp, StringFormat='{}{0:HH:mm:ss}'}" 
                                           VerticalAlignment="Center"/>
                                
                                <TextBlock Grid.Column="1" 
                                           Text="{Binding PressureHpa, StringFormat='{}{0:F2} hPa'}" 
                                           Margin="10,0" 
                                           VerticalAlignment="Center"/>
                                
                                <TextBlock Grid.Column="2" 
                                           Text="{Binding PressureMmHg, StringFormat='{}{0:F2} mmHg'}" 
                                           VerticalAlignment="Center"/>
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </StackPanel>
        </ScrollViewer>

        <!-- Navigation Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" 
                    HorizontalAlignment="Center" 
                    VerticalAlignment="Bottom" 
                    Padding="20">
            <Button Content="Graphics" 
                    Click="GraphicsButton_Click" 
                    Margin="0,0,20,0" 
                    Padding="20,10"/>
            <Button Content="Settings" 
                    Click="SettingsButton_Click" 
                    Margin="0,0,20,0" 
                    Padding="20,10"/>
            <Button Content="Share" 
                    Click="ShareButton_Click" 
                    Padding="20,10"/>
        </StackPanel>
    </Grid>
</Page>